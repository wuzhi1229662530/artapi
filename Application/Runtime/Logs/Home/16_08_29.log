[ 2016-08-29T10:35:14+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/Shop/shopGoodsID
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000063s ]
INFO: [ app_init ] --END-- [ RunTime:0.071728s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.039119s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.050286s ]
INFO: [ app_begin ] --END-- [ RunTime:0.090211s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0840s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_author_goods` [ RunTime:0.0339s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT ab_base_goods.id,ab_base_goods.title as name,ab_base_goods.pro_no,ab_base_goods.description,ab_base_goods.sell_price,ab_base_goods.is_buy_framed,ab_base_goods.inventory,ab_base_goods.recommended,ab_base_goods.longth as goods_longth,ab_base_goods.width as goods_width,ab_base_goods.url,CONCAT(round(ab_base_goods.longth),'×',round(ab_base_goods.width) ) as size,a.name as authorname,ab_base_author_goods.type,ab_base_author_goods.author as author_id,(select d.dictname from sys_diction d where d.id = ab_base_goods.medium) as medium,`material`,(select d.dictname from sys_diction d where d.id = ab_base_goods.material) as material_name FROM `ab_base_goods` INNER JOIN ab_base_author_goods ON ab_base_goods.id = ab_base_author_goods.goods left join ab_base_author a on ab_base_author_goods.author = a.id  WHERE ( ab_base_goods.is_online in (1) and ab_base_goods.delete_status in (0) and ab_base_goods.id = 3597 )  [ RunTime:0.0338s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_user_favourit` [ RunTime:0.0326s ]
NOTIC: [8] Undefined index: HTTP_X_REAL_IP G:\wamp\www\artbean2\code\trunk\webService\Application\Common\Common\function.php 第 455 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `operation_click` [ RunTime:0.0372s ]
SQL: INSERT INTO `operation_click` (`Ip`,`oper`,`create_time`,`oper_type`) VALUES ('0.0.0.0','3597','2016-08-29 10:35:03','good') [ RunTime:0.0444s ]
NOTIC: [8] Undefined variable: user_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ShopController.class.php 第 274 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_scaleboard` [ RunTime:0.0326s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_expert_recommend` [ RunTime:0.0328s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_attachment` [ RunTime:0.0320s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(attachment_path,'.',1),'_s',SUBSTRING(attachment_path,LENGTH(SUBSTRING_INDEX(attachment_path,'.',1))+1,LENGTH(attachment_path)))) as img_url FROM `ab_base_attachment` WHERE (  attachment_type = 'pic' and attachment_appertain_table ='ab_base_goods' and  attachment_appertain_table_column_id = 3597 ) LIMIT 0,5   [ RunTime:0.0453s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_shop_bundling` [ RunTime:0.0723s ]
NOTIC: [2] Missing argument 2 for Home\Model\ShopBundlingModel::_getRahmen(), called in G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ShopController.class.php on line 300 and defined G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Model\ShopBundlingModel.class.php 第 38 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                        r.id,
                        r.name AS name,
                        r.r_price AS sell_price,
                        r.r_size AS size,
                        r.r_thickness AS thickness,
                        r.r_style AS style,
                        r.r_material AS material,
                        r.r_width AS width,
                        r.inventory,
                        r.unit_price,
                        r.length,
                        r.auxiliary_price,
                        r.operation_price,
                        r.auxiliary_price2,
                        CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as img_url,CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img
                    FROM
                        ab_shop_bundling b
                    inner JOIN ab_shop_rahmen r ON b.rahmen_id = r.id AND r.delete_status in (0) AND r.type in (1)
                    WHERE b.delete_status in (0)
                        AND b.goods_id = 3597 [ RunTime:0.3735s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                    r.id,
                    r.code,
                    r.inventory,
                    r.unit_price,
                    r.length,
                    r.auxiliary_price
                FROM
                    ab_shop_rahmen r
                WHERE r.delete_status in (0)
                    AND r.type = 2
                    AND r.code in (9999,8609,8610) [ RunTime:0.0325s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_shop_free_shipping` [ RunTime:0.0326s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                    a.setting,
                    a.type
                FROM
                    ab_shop_free_shipping a
                WHERE
                    a.delete_status in (0)
                    AND a.startTime < now()
                    AND a.endTime > now()
                    AND (a.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=a.id and b.goodsId= 3597))
                ORDER BY a.id ASC
                limit 1 [ RunTime:0.0328s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT 
                     CONCAT('ShopGoodsID_',g.id) as jump_url,
                    g.title as name,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT(round(g.longth),'×', round(g.width)) as size,
                    g.sell_price,
                    (select  a.name  from ab_base_author a where   ag.author = a.id and a.author_type in (1) ) authorname,
                    g.url,
                    g.id as goods_id
                FROM ab_base_expert_recommend er
                    LEFT JOIN ab_base_goods g ON g.id = er.goodsid and g.delete_status in (0) and g.is_online=1 and  g.inventory in (1) 
                    inner join ab_base_author_goods ag on g.id = ag.goods AND ag.type IN (1)
                    WHERE 
                     er.delete_status in (0) 
                    and er.moduletype in (1,3)
                    ORDER BY g.sort asc, er.create_time DESC
                    LIMIT 0,4 [ RunTime:0.0339s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                        CONCAT('ShopGoodsID_',t.id) as jump_url,
                        CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(t.cover_path,'.',1),'_s',SUBSTRING(t.cover_path,LENGTH(SUBSTRING_INDEX(t.cover_path,'.',1))+1,LENGTH(t.cover_path)))) as img_url,
                        CONCAT(round(t.longth),'×', round(t.width)) as size,
                        t.sell_price,
                        d.name as authorname,
                        t.url,
                        t.title as name
                    FROM
                        ab_base_goods t
                    LEFT JOIN ab_base_author_goods a ON t.id = a.goods
                    AND a.delete_status = 0
                    LEFT JOIN ab_base_author d ON a.author = d.id
                    AND d.delete_status = 0
                    LEFT JOIN php_expert_goods b ON t.id = b.goods
                    WHERE
                        t.is_online = 1
                    AND t.inventory <> 0
                    AND a.type = 1
                    AND a.author IS NOT NULL
                    AND t.delete_status = 0
                    AND b.`comment` IS NOT NULL
                    AND b.`comment` <> ''
                    AND b.id = (
                        SELECT
                            max(id)
                        FROM
                            php_expert_goods c
                        WHERE
                            c.goods = t.id
                        AND c.`comment` IS NOT NULL
                        AND c.`comment` <> ''
                    )
                    
                    ORDER BY
                        t.online_time DESC
                    LIMIT 4 [ RunTime:9.2661s ]

[ 2016-08-29T10:38:00+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/Shop/shopGoodsID
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000067s ]
INFO: [ app_init ] --END-- [ RunTime:0.001705s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001212s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002187s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004076s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0395s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_author_goods` [ RunTime:0.0348s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT ab_base_goods.id,ab_base_goods.title as name,ab_base_goods.pro_no,ab_base_goods.description,ab_base_goods.sell_price,ab_base_goods.is_buy_framed,ab_base_goods.inventory,ab_base_goods.recommended,ab_base_goods.longth as goods_longth,ab_base_goods.width as goods_width,ab_base_goods.url,CONCAT(round(ab_base_goods.longth),'×',round(ab_base_goods.width) ) as size,a.name as authorname,ab_base_author_goods.type,ab_base_author_goods.author as author_id,(select d.dictname from sys_diction d where d.id = ab_base_goods.medium) as medium,`material`,(select d.dictname from sys_diction d where d.id = ab_base_goods.material) as material_name FROM `ab_base_goods` INNER JOIN ab_base_author_goods ON ab_base_goods.id = ab_base_author_goods.goods left join ab_base_author a on ab_base_author_goods.author = a.id  WHERE ( ab_base_goods.is_online in (1) and ab_base_goods.delete_status in (0) and ab_base_goods.id = 3597 )  [ RunTime:0.0355s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_user_favourit` [ RunTime:0.0359s ]
NOTIC: [8] Undefined index: HTTP_X_REAL_IP G:\wamp\www\artbean2\code\trunk\webService\Application\Common\Common\function.php 第 455 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `operation_click` [ RunTime:0.0345s ]
SQL: INSERT INTO `operation_click` (`Ip`,`oper`,`create_time`,`oper_type`) VALUES ('0.0.0.0','3597','2016-08-29 10:37:50','good') [ RunTime:0.0424s ]
NOTIC: [8] Undefined variable: user_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ShopController.class.php 第 274 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_scaleboard` [ RunTime:0.0347s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_expert_recommend` [ RunTime:0.0348s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_attachment` [ RunTime:0.0351s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(attachment_path,'.',1),'_s',SUBSTRING(attachment_path,LENGTH(SUBSTRING_INDEX(attachment_path,'.',1))+1,LENGTH(attachment_path)))) as img_url FROM `ab_base_attachment` WHERE (  attachment_type = 'pic' and attachment_appertain_table ='ab_base_goods' and  attachment_appertain_table_column_id = 3597 ) LIMIT 0,5   [ RunTime:0.0358s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_shop_bundling` [ RunTime:0.0376s ]
NOTIC: [2] Missing argument 2 for Home\Model\ShopBundlingModel::_getRahmen(), called in G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ShopController.class.php on line 300 and defined G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Model\ShopBundlingModel.class.php 第 38 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                        r.id,
                        r.name AS name,
                        r.r_price AS sell_price,
                        r.r_size AS size,
                        r.r_thickness AS thickness,
                        r.r_style AS style,
                        r.r_material AS material,
                        r.r_width AS width,
                        r.inventory,
                        r.unit_price,
                        r.length,
                        r.auxiliary_price,
                        r.operation_price,
                        r.auxiliary_price2,
                        CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as img_url,CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img
                    FROM
                        ab_shop_bundling b
                    inner JOIN ab_shop_rahmen r ON b.rahmen_id = r.id AND r.delete_status in (0) AND r.type in (1)
                    WHERE b.delete_status in (0)
                        AND b.goods_id = 3597 [ RunTime:0.0518s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                    r.id,
                    r.code,
                    r.inventory,
                    r.unit_price,
                    r.length,
                    r.auxiliary_price
                FROM
                    ab_shop_rahmen r
                WHERE r.delete_status in (0)
                    AND r.type = 2
                    AND r.code in (9999,8609,8610) [ RunTime:0.0341s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_shop_free_shipping` [ RunTime:0.0356s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                    a.setting freeshipmoney
                FROM
                    ab_shop_free_shipping a
                WHERE
                    a.delete_status in (0)
                    AND a.startTime < now()
                    AND a.endTime > now()
                    AND (a.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=a.id and b.goodsId= 3597))
                ORDER BY a.id ASC
                limit 1 [ RunTime:0.0341s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT 
                     CONCAT('ShopGoodsID_',g.id) as jump_url,
                    g.title as name,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT(round(g.longth),'×', round(g.width)) as size,
                    g.sell_price,
                    (select  a.name  from ab_base_author a where   ag.author = a.id and a.author_type in (1) ) authorname,
                    g.url,
                    g.id as goods_id
                FROM ab_base_expert_recommend er
                    LEFT JOIN ab_base_goods g ON g.id = er.goodsid and g.delete_status in (0) and g.is_online=1 and  g.inventory in (1) 
                    inner join ab_base_author_goods ag on g.id = ag.goods AND ag.type IN (1)
                    WHERE 
                     er.delete_status in (0) 
                    and er.moduletype in (1,3)
                    ORDER BY g.sort asc, er.create_time DESC
                    LIMIT 0,4 [ RunTime:0.0356s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                        CONCAT('ShopGoodsID_',t.id) as jump_url,
                        CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(t.cover_path,'.',1),'_s',SUBSTRING(t.cover_path,LENGTH(SUBSTRING_INDEX(t.cover_path,'.',1))+1,LENGTH(t.cover_path)))) as img_url,
                        CONCAT(round(t.longth),'×', round(t.width)) as size,
                        t.sell_price,
                        d.name as authorname,
                        t.url,
                        t.title as name
                    FROM
                        ab_base_goods t
                    LEFT JOIN ab_base_author_goods a ON t.id = a.goods
                    AND a.delete_status = 0
                    LEFT JOIN ab_base_author d ON a.author = d.id
                    AND d.delete_status = 0
                    LEFT JOIN php_expert_goods b ON t.id = b.goods
                    WHERE
                        t.is_online = 1
                    AND t.inventory <> 0
                    AND a.type = 1
                    AND a.author IS NOT NULL
                    AND t.delete_status = 0
                    AND b.`comment` IS NOT NULL
                    AND b.`comment` <> ''
                    AND b.id = (
                        SELECT
                            max(id)
                        FROM
                            php_expert_goods c
                        WHERE
                            c.goods = t.id
                        AND c.`comment` IS NOT NULL
                        AND c.`comment` <> ''
                    )
                    
                    ORDER BY
                        t.online_time DESC
                    LIMIT 4 [ RunTime:9.1219s ]

[ 2016-08-29T10:42:01+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000067s ]
INFO: [ app_init ] --END-- [ RunTime:0.001103s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.003799s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.003839s ]
INFO: [ app_begin ] --END-- [ RunTime:0.008752s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0318s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0302s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0295s ]

[ 2016-08-29T10:42:34+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000074s ]
INFO: [ app_init ] --END-- [ RunTime:0.001635s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000918s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.001861s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003286s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0324s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0316s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0318s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472438554' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0400s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0402s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0318s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0349s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0332s ]
NOTIC: [2] vsprintf(): Too few arguments G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Model.class.php 第 1415 行.
ERR: 1065:Query was empty
NOTIC: [8] Undefined variable: order_goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 354 行.

[ 2016-08-29T10:45:56+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000070s ]
INFO: [ app_init ] --END-- [ RunTime:0.001025s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001402s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002140s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004152s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0323s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0317s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0313s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472438756' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0443s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0310s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0456s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0325s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0321s ]
NOTIC: [2] vsprintf(): Too few arguments G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Model.class.php 第 1415 行.
ERR: 1065:Query was empty
NOTIC: [8] Undefined variable: order_goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 355 行.

[ 2016-08-29T10:46:50+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000085s ]
INFO: [ app_init ] --END-- [ RunTime:0.000933s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000950s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.001732s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003257s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0330s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0323s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0345s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472438810' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0458s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0319s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0385s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0335s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0325s ]
NOTIC: [2] vsprintf(): Too few arguments G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Model.class.php 第 1415 行.
ERR: 1065:Query was empty
ERR: 1065:Query was empty

[ 2016-08-29T10:49:39+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/shopcart/shopcartlist
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000063s ]
INFO: [ app_init ] --END-- [ RunTime:0.001348s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001215s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002128s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004001s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0333s ]
NOTIC: [2] Missing argument 2 for Home\Model\ShopEnshrineModel::_getShopCartList(), called in G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ShopcartController.class.php on line 28 and defined G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Model\ShopEnshrineModel.class.php 第 33 行.
NOTIC: [8] Undefined variable: ens_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Model\ShopEnshrineModel.class.php 第 34 行.
NOTIC: [2] vsprintf(): Too few arguments G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Model.class.php 第 1415 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
ERR: 1065:Query was empty

[ 2016-08-29T10:50:37+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/shopcart/shopcartlist
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000091s ]
INFO: [ app_init ] --END-- [ RunTime:0.000912s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000960s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.001838s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003475s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0327s ]
NOTIC: [2] Missing argument 2 for Home\Model\ShopEnshrineModel::_getShopCartList(), called in G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ShopcartController.class.php on line 28 and defined G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Model\ShopEnshrineModel.class.php 第 33 行.
NOTIC: [8] Undefined variable: ens_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Model\ShopEnshrineModel.class.php 第 34 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.3971s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0336s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT count(id) as addr_num FROM `ab_shop_address` WHERE (  delete_status = 0 and adr_type = 0 and user_id = 90 ) LIMIT 1   [ RunTime:0.0321s ]

[ 2016-08-29T10:52:08+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000059s ]
INFO: [ app_init ] --END-- [ RunTime:0.000984s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001734s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002777s ]
INFO: [ app_begin ] --END-- [ RunTime:0.005635s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0491s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0327s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0304s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439128' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0412s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0342s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0309s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0340s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0311s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0415s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0313s ]
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: ens_arr G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 200 行.

[ 2016-08-29T10:52:34+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/Shop/shopGoodsID
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000090s ]
INFO: [ app_init ] --END-- [ RunTime:0.001029s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001332s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.001908s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003910s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0316s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_author_goods` [ RunTime:0.0310s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT ab_base_goods.id,ab_base_goods.title as name,ab_base_goods.pro_no,ab_base_goods.description,ab_base_goods.sell_price,ab_base_goods.is_buy_framed,ab_base_goods.inventory,ab_base_goods.recommended,ab_base_goods.longth as goods_longth,ab_base_goods.width as goods_width,ab_base_goods.url,CONCAT(round(ab_base_goods.longth),'×',round(ab_base_goods.width) ) as size,a.name as authorname,ab_base_author_goods.type,ab_base_author_goods.author as author_id,(select d.dictname from sys_diction d where d.id = ab_base_goods.medium) as medium,`material`,(select d.dictname from sys_diction d where d.id = ab_base_goods.material) as material_name FROM `ab_base_goods` INNER JOIN ab_base_author_goods ON ab_base_goods.id = ab_base_author_goods.goods left join ab_base_author a on ab_base_author_goods.author = a.id  WHERE ( ab_base_goods.is_online in (1) and ab_base_goods.delete_status in (0) and ab_base_goods.id = 3597 )  [ RunTime:0.0322s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_user_favourit` [ RunTime:0.0314s ]
NOTIC: [8] Undefined index: HTTP_X_REAL_IP G:\wamp\www\artbean2\code\trunk\webService\Application\Common\Common\function.php 第 455 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `operation_click` [ RunTime:0.0301s ]
SQL: INSERT INTO `operation_click` (`Ip`,`oper`,`create_time`,`oper_type`) VALUES ('0.0.0.0','3597','2016-08-29 10:52:24','good') [ RunTime:0.0508s ]
NOTIC: [8] Undefined variable: user_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ShopController.class.php 第 274 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_scaleboard` [ RunTime:0.0313s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_expert_recommend` [ RunTime:0.0354s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_attachment` [ RunTime:0.0437s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(attachment_path,'.',1),'_s',SUBSTRING(attachment_path,LENGTH(SUBSTRING_INDEX(attachment_path,'.',1))+1,LENGTH(attachment_path)))) as img_url FROM `ab_base_attachment` WHERE (  attachment_type = 'pic' and attachment_appertain_table ='ab_base_goods' and  attachment_appertain_table_column_id = 3597 ) LIMIT 0,5   [ RunTime:0.0361s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_shop_bundling` [ RunTime:0.0378s ]
NOTIC: [2] Missing argument 2 for Home\Model\ShopBundlingModel::_getRahmen(), called in G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ShopController.class.php on line 300 and defined G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Model\ShopBundlingModel.class.php 第 38 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                        r.id,
                        r.name AS name,
                        r.r_price AS sell_price,
                        r.r_size AS size,
                        r.r_thickness AS thickness,
                        r.r_style AS style,
                        r.r_material AS material,
                        r.r_width AS width,
                        r.inventory,
                        r.unit_price,
                        r.length,
                        r.auxiliary_price,
                        r.operation_price,
                        r.auxiliary_price2,
                        CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as img_url,CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img
                    FROM
                        ab_shop_bundling b
                    inner JOIN ab_shop_rahmen r ON b.rahmen_id = r.id AND r.delete_status in (0) AND r.type in (1)
                    WHERE b.delete_status in (0)
                        AND b.goods_id = 3597 [ RunTime:0.0381s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                    r.id,
                    r.code,
                    r.inventory,
                    r.unit_price,
                    r.length,
                    r.auxiliary_price
                FROM
                    ab_shop_rahmen r
                WHERE r.delete_status in (0)
                    AND r.type = 2
                    AND r.code in (9999,8609,8610) [ RunTime:0.0415s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_shop_free_shipping` [ RunTime:0.0329s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                    a.setting freeshipmoney
                FROM
                    ab_shop_free_shipping a
                WHERE
                    a.delete_status in (0)
                    AND a.startTime < now()
                    AND a.endTime > now()
                    AND (a.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=a.id and b.goodsId= 3597))
                ORDER BY a.id ASC
                limit 1 [ RunTime:0.0338s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT 
                     CONCAT('ShopGoodsID_',g.id) as jump_url,
                    g.title as name,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT(round(g.longth),'×', round(g.width)) as size,
                    g.sell_price,
                    (select  a.name  from ab_base_author a where   ag.author = a.id and a.author_type in (1) ) authorname,
                    g.url,
                    g.id as goods_id
                FROM ab_base_expert_recommend er
                    LEFT JOIN ab_base_goods g ON g.id = er.goodsid and g.delete_status in (0) and g.is_online=1 and  g.inventory in (1) 
                    inner join ab_base_author_goods ag on g.id = ag.goods AND ag.type IN (1)
                    WHERE 
                     er.delete_status in (0) 
                    and er.moduletype in (1,3)
                    ORDER BY g.sort asc, er.create_time DESC
                    LIMIT 0,4 [ RunTime:0.0314s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                        CONCAT('ShopGoodsID_',t.id) as jump_url,
                        CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(t.cover_path,'.',1),'_s',SUBSTRING(t.cover_path,LENGTH(SUBSTRING_INDEX(t.cover_path,'.',1))+1,LENGTH(t.cover_path)))) as img_url,
                        CONCAT(round(t.longth),'×', round(t.width)) as size,
                        t.sell_price,
                        d.name as authorname,
                        t.url,
                        t.title as name
                    FROM
                        ab_base_goods t
                    LEFT JOIN ab_base_author_goods a ON t.id = a.goods
                    AND a.delete_status = 0
                    LEFT JOIN ab_base_author d ON a.author = d.id
                    AND d.delete_status = 0
                    LEFT JOIN php_expert_goods b ON t.id = b.goods
                    WHERE
                        t.is_online = 1
                    AND t.inventory <> 0
                    AND a.type = 1
                    AND a.author IS NOT NULL
                    AND t.delete_status = 0
                    AND b.`comment` IS NOT NULL
                    AND b.`comment` <> ''
                    AND b.id = (
                        SELECT
                            max(id)
                        FROM
                            php_expert_goods c
                        WHERE
                            c.goods = t.id
                        AND c.`comment` IS NOT NULL
                        AND c.`comment` <> ''
                    )
                    
                    ORDER BY
                        t.online_time DESC
                    LIMIT 4 [ RunTime:9.4220s ]

[ 2016-08-29T10:55:29+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000094s ]
INFO: [ app_init ] --END-- [ RunTime:0.001120s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001182s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002327s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004235s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0327s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0320s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0353s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439328' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0385s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0311s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0340s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0334s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0339s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0337s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0325s ]
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: ens_arr G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 200 行.

[ 2016-08-29T10:55:34+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000086s ]
INFO: [ app_init ] --END-- [ RunTime:0.000915s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002079s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002042s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004828s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0387s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0317s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0340s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439334' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0436s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0308s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0322s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0320s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0315s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0335s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0324s ]
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: ens_arr G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 200 行.

[ 2016-08-29T10:56:02+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000089s ]
INFO: [ app_init ] --END-- [ RunTime:0.001029s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001119s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002019s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003725s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0318s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0314s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0309s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439362' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0393s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0308s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0318s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0306s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0333s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0336s ]

[ 2016-08-29T10:56:58+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001012s ]
INFO: [ app_init ] --END-- [ RunTime:0.001946s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000987s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002055s ]
INFO: [ app_begin ] --END-- [ RunTime:0.006759s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0342s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0315s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0307s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439413' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0368s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0343s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0321s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0349s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0314s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0330s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0314s ]
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 140 行.
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 141 行.
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: error2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 205 行.
NOTIC: [8] Undefined variable: money G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [2] array_values() expects parameter 1 to be array, null given G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [8] Undefined variable: feightmoney G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 217 行.
SQL: SHOW COLUMNS FROM `ab_shop_order` [ RunTime:0.0330s ]
SQL: INSERT INTO `ab_shop_order` (`user_id`,`order_no`,`payment`,`pay_status`,`payable_amount`,`adjust_taxes`,`taxes`,`is_invoice`,`order_amount`,`status`,`delete_status`,`create_time`,`update_time`,`rahmen_price`,`order_source`) VALUES ('90','20160829105657659','0','0','2153','0.08875','191.08','0','2344.08','1','0','2016-08-29 10:56:57','2016-08-29 10:56:57','0','3') [ RunTime:0.0327s ]
NOTIC: [8] Undefined index: isfree G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 262 行.
NOTIC: [8] Undefined index: rahmen_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 265 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 266 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 267 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 268 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 269 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 272 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 273 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 274 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 275 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 276 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 277 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 278 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 279 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 280 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 283 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 288 行.
SQL: SHOW COLUMNS FROM `ab_shop_order_express` [ RunTime:0.0317s ]
SQL: INSERT INTO `ab_shop_order_express` (`order_id`,`accept_name`,`phone`,`mobile`,`province`,`city`,`billing_id`,`address`,`addr`,`zip`,`address_id`,`goods_invoice`,`delete_status`,`create_time`) VALUES ('1515','Wuwjjj Zhi','','3123451234','219','New York','63','','555 Lexington Avenue','10022','63','0','0','2016-08-29 10:56:57') [ RunTime:0.0320s ]
SQL: INSERT INTO `ab_shop_order_goods` (`order_goods_no`,`order_id`,`goods_id`,`ups_service_code`,`rahmen_id`,`rahmen_price`,`frame_count`,`frame_in_count`,`inline_id`,`backSize`,`weight`,`width`,`length`,`height`,`box`,`bags`,`backColor`,`colorName`,`goods_price`,`is_postage`,`delete_status`,`create_time`,`isfree`) VALUES ('20160829105657659','1515','3597','','40','353','9','0','0','3','1','49.2','49.2','5.12','6','50','#fbfdfc','Winter White','1800','0','0','2016-08-29 10:56:57',NULL),('20160829105657659','1515',NULL,'',NULL,'0',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0','0','2016-08-29 10:56:57',NULL) [ RunTime:0.0477s ]
SQL: DELETE FROM `ab_shop_enshrine` WHERE `id` IN ('2953') AND `user` = 90 [ RunTime:0.0302s ]
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0316s ]
SQL: SHOW COLUMNS FROM `ab_shop_rahmen` [ RunTime:0.0318s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)

[ 2016-08-29T11:00:21+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000081s ]
INFO: [ app_init ] --END-- [ RunTime:0.001525s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002795s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002318s ]
INFO: [ app_begin ] --END-- [ RunTime:0.006474s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0386s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0302s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0294s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439618' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0389s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0313s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0297s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0343s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0302s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0337s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0302s ]
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 140 行.
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 141 行.
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: error2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 205 行.
NOTIC: [8] Undefined variable: money G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [2] array_values() expects parameter 1 to be array, null given G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [8] Undefined variable: feightmoney G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 217 行.
SQL: SHOW COLUMNS FROM `ab_shop_order` [ RunTime:0.0327s ]
SQL: INSERT INTO `ab_shop_order` (`user_id`,`order_no`,`payment`,`pay_status`,`payable_amount`,`adjust_taxes`,`taxes`,`is_invoice`,`order_amount`,`status`,`delete_status`,`create_time`,`update_time`,`rahmen_price`,`order_source`) VALUES ('90','20160829110020784','0','0','2153','0.08875','191.08','0','2344.08','1','0','2016-08-29 11:00:20','2016-08-29 11:00:20','0','3') [ RunTime:0.0293s ]
NOTIC: [8] Undefined index: isfree G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 262 行.
NOTIC: [8] Undefined index: rahmen_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 265 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 266 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 267 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 268 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 269 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 272 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 273 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 274 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 275 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 276 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 277 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 278 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 279 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 280 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 283 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 288 行.
SQL: SHOW COLUMNS FROM `ab_shop_order_express` [ RunTime:0.0353s ]
SQL: INSERT INTO `ab_shop_order_express` (`order_id`,`accept_name`,`phone`,`mobile`,`province`,`city`,`billing_id`,`address`,`addr`,`zip`,`address_id`,`goods_invoice`,`delete_status`,`create_time`) VALUES ('1516','Wuwjjj Zhi','','3123451234','219','New York','63','','555 Lexington Avenue','10022','63','0','0','2016-08-29 11:00:20') [ RunTime:0.0315s ]
SQL: INSERT INTO `ab_shop_order_goods` (`order_goods_no`,`order_id`,`goods_id`,`ups_service_code`,`rahmen_id`,`rahmen_price`,`frame_count`,`frame_in_count`,`inline_id`,`backSize`,`weight`,`width`,`length`,`height`,`box`,`bags`,`backColor`,`colorName`,`goods_price`,`is_postage`,`delete_status`,`create_time`,`isfree`) VALUES ('20160829110020784','1516','3597','','40','353','9','0','0','3','1','49.2','49.2','5.12','6','50','#fbfdfc','Winter White','1800','0','0','2016-08-29 11:00:20',NULL),('20160829110020784','1516',NULL,'',NULL,'0',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0','0','2016-08-29 11:00:20',NULL) [ RunTime:0.0345s ]
SQL: DELETE FROM `ab_shop_enshrine` WHERE `id` IN ('2953') AND `user` = 90 [ RunTime:0.0398s ]
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0314s ]
SQL: SHOW COLUMNS FROM `ab_shop_rahmen` [ RunTime:0.0306s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)

[ 2016-08-29T11:01:49+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000060s ]
INFO: [ app_init ] --END-- [ RunTime:0.000928s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001077s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002249s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004097s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0338s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0496s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.3509s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439706' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0594s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0393s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0329s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0531s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0336s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.4410s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0378s ]
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 140 行.
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 141 行.
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: error2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 205 行.
NOTIC: [8] Undefined variable: money G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [2] array_values() expects parameter 1 to be array, null given G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [8] Undefined variable: feightmoney G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 217 行.
SQL: SHOW COLUMNS FROM `ab_shop_order` [ RunTime:0.0322s ]
SQL: INSERT INTO `ab_shop_order` (`user_id`,`order_no`,`payment`,`pay_status`,`payable_amount`,`adjust_taxes`,`taxes`,`is_invoice`,`order_amount`,`status`,`delete_status`,`create_time`,`update_time`,`rahmen_price`,`order_source`) VALUES ('90','20160829110148991','0','0','2153','0.08875','191.08','0','2344.08','1','0','2016-08-29 11:01:48','2016-08-29 11:01:48','0','3') [ RunTime:0.0319s ]
NOTIC: [8] Undefined index: isfree G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 262 行.
NOTIC: [8] Undefined index: rahmen_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 265 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 266 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 267 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 268 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 269 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 272 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 273 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 274 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 275 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 276 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 277 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 278 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 279 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 280 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 283 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 288 行.
SQL: SHOW COLUMNS FROM `ab_shop_order_express` [ RunTime:0.0340s ]
SQL: INSERT INTO `ab_shop_order_express` (`order_id`,`accept_name`,`phone`,`mobile`,`province`,`city`,`billing_id`,`address`,`addr`,`zip`,`address_id`,`goods_invoice`,`delete_status`,`create_time`) VALUES ('1517','Wuwjjj Zhi','','3123451234','219','New York','63','','555 Lexington Avenue','10022','63','0','0','2016-08-29 11:01:48') [ RunTime:0.0314s ]
SQL: INSERT INTO `ab_shop_order_goods` (`order_goods_no`,`order_id`,`goods_id`,`ups_service_code`,`rahmen_id`,`rahmen_price`,`frame_count`,`frame_in_count`,`inline_id`,`backSize`,`weight`,`width`,`length`,`height`,`box`,`bags`,`backColor`,`colorName`,`goods_price`,`is_postage`,`delete_status`,`create_time`,`isfree`) VALUES ('20160829110148991','1517','3597','','40','353','9','0','0','3','1','49.2','49.2','5.12','6','50','#fbfdfc','Winter White','1800','0','0','2016-08-29 11:01:48',NULL),('20160829110148991','1517',NULL,'',NULL,'0',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0','0','2016-08-29 11:01:48',NULL) [ RunTime:0.0316s ]
SQL: DELETE FROM `ab_shop_enshrine` WHERE `id` IN ('2953') AND `user` = 90 [ RunTime:0.0307s ]
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0321s ]
SQL: SHOW COLUMNS FROM `ab_shop_rahmen` [ RunTime:0.0324s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)

[ 2016-08-29T11:02:55+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000086s ]
INFO: [ app_init ] --END-- [ RunTime:0.001123s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001579s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.008660s ]
INFO: [ app_begin ] --END-- [ RunTime:0.010946s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0329s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0382s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0311s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439771' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0385s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0321s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0318s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0321s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0321s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0339s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0323s ]
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 140 行.
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 141 行.
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: error2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 205 行.
NOTIC: [8] Undefined variable: money G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [2] array_values() expects parameter 1 to be array, null given G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [8] Undefined variable: feightmoney G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 217 行.
SQL: SHOW COLUMNS FROM `ab_shop_order` [ RunTime:0.0336s ]
SQL: INSERT INTO `ab_shop_order` (`user_id`,`order_no`,`payment`,`pay_status`,`payable_amount`,`adjust_taxes`,`taxes`,`is_invoice`,`order_amount`,`status`,`delete_status`,`create_time`,`update_time`,`rahmen_price`,`order_source`) VALUES ('90','20160829110254596','0','0','2153','0.08875','191.08','0','2344.08','1','0','2016-08-29 11:02:54','2016-08-29 11:02:54','0','3') [ RunTime:0.0318s ]
NOTIC: [8] Undefined index: isfree G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 262 行.
NOTIC: [8] Undefined index: rahmen_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 265 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 266 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 267 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 268 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 269 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 272 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 273 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 274 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 275 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 276 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 277 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 278 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 279 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 280 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 283 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 288 行.
SQL: SHOW COLUMNS FROM `ab_shop_order_express` [ RunTime:0.0370s ]
SQL: INSERT INTO `ab_shop_order_express` (`order_id`,`accept_name`,`phone`,`mobile`,`province`,`city`,`billing_id`,`address`,`addr`,`zip`,`address_id`,`goods_invoice`,`delete_status`,`create_time`) VALUES ('1518','Wuwjjj Zhi','','3123451234','219','New York','63','','555 Lexington Avenue','10022','63','0','0','2016-08-29 11:02:54') [ RunTime:0.0430s ]
SQL: INSERT INTO `ab_shop_order_goods` (`order_goods_no`,`order_id`,`goods_id`,`ups_service_code`,`rahmen_id`,`rahmen_price`,`frame_count`,`frame_in_count`,`inline_id`,`backSize`,`weight`,`width`,`length`,`height`,`box`,`bags`,`backColor`,`colorName`,`goods_price`,`is_postage`,`delete_status`,`create_time`,`isfree`) VALUES ('20160829110254596','1518','3597','','40','353','9','0','0','3','1','49.2','49.2','5.12','6','50','#fbfdfc','Winter White','1800','0','0','2016-08-29 11:02:54',NULL),('20160829110254596','1518',NULL,'',NULL,'0',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0','0','2016-08-29 11:02:54',NULL) [ RunTime:0.0370s ]
SQL: DELETE FROM `ab_shop_enshrine` WHERE `id` IN ('2953') AND `user` = 90 [ RunTime:0.0329s ]
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0337s ]
SQL: SHOW COLUMNS FROM `ab_shop_rahmen` [ RunTime:0.0323s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)

[ 2016-08-29T11:03:16+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000271s ]
INFO: [ app_init ] --END-- [ RunTime:0.001538s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001146s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.004019s ]
INFO: [ app_begin ] --END-- [ RunTime:0.005900s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0330s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0305s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0387s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439793' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0390s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0303s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0308s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0344s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0297s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0324s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0311s ]
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 140 行.
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 141 行.
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: error2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 205 行.
NOTIC: [8] Undefined variable: money G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [2] array_values() expects parameter 1 to be array, null given G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [8] Undefined variable: feightmoney G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 217 行.
SQL: SHOW COLUMNS FROM `ab_shop_order` [ RunTime:0.0392s ]
SQL: INSERT INTO `ab_shop_order` (`user_id`,`order_no`,`payment`,`pay_status`,`payable_amount`,`adjust_taxes`,`taxes`,`is_invoice`,`order_amount`,`status`,`delete_status`,`create_time`,`update_time`,`rahmen_price`,`order_source`) VALUES ('90','20160829110316642','0','0','2153','0.08875','191.08','0','2344.08','1','0','2016-08-29 11:03:16','2016-08-29 11:03:16','0','3') [ RunTime:0.0335s ]
NOTIC: [8] Undefined index: isfree G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 262 行.
NOTIC: [8] Undefined index: rahmen_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 265 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 266 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 267 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 268 行.
NOTIC: [8] Undefined index: rahmen G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 269 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 272 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 273 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 274 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 275 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 276 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 277 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 278 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 279 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 280 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 283 行.
NOTIC: [8] Undefined index: goods G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 287 行.
NOTIC: [8] Undefined index: goods_id G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 288 行.
SQL: SHOW COLUMNS FROM `ab_shop_order_express` [ RunTime:0.0326s ]
SQL: INSERT INTO `ab_shop_order_express` (`order_id`,`accept_name`,`phone`,`mobile`,`province`,`city`,`billing_id`,`address`,`addr`,`zip`,`address_id`,`goods_invoice`,`delete_status`,`create_time`) VALUES ('1519','Wuwjjj Zhi','','3123451234','219','New York','63','','555 Lexington Avenue','10022','63','0','0','2016-08-29 11:03:16') [ RunTime:0.0328s ]
SQL: INSERT INTO `ab_shop_order_goods` (`order_goods_no`,`order_id`,`goods_id`,`ups_service_code`,`rahmen_id`,`rahmen_price`,`frame_count`,`frame_in_count`,`inline_id`,`backSize`,`weight`,`width`,`length`,`height`,`box`,`bags`,`backColor`,`colorName`,`goods_price`,`is_postage`,`delete_status`,`create_time`,`isfree`) VALUES ('20160829110316642','1519','3597','','40','353','9','0','0','3','1','49.2','49.2','5.12','6','50','#fbfdfc','Winter White','1800','0','0','2016-08-29 11:03:16',NULL),('20160829110316642','1519',NULL,'',NULL,'0',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0','0','2016-08-29 11:03:16',NULL) [ RunTime:0.0317s ]
SQL: DELETE FROM `ab_shop_enshrine` WHERE `id` IN ('2953') AND `user` = 90 [ RunTime:0.0313s ]
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0350s ]
SQL: SHOW COLUMNS FROM `ab_shop_rahmen` [ RunTime:0.0309s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597,)

[ 2016-08-29T11:04:14+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000060s ]
INFO: [ app_init ] --END-- [ RunTime:0.001037s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001968s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.003370s ]
INFO: [ app_begin ] --END-- [ RunTime:0.006106s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0443s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0311s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0322s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439854' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0516s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0310s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0314s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0340s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0485s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0878s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0315s ]
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 140 行.
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 141 行.

[ 2016-08-29T11:04:47+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000065s ]
INFO: [ app_init ] --END-- [ RunTime:0.001219s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.003719s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.004449s ]
INFO: [ app_begin ] --END-- [ RunTime:0.009276s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0363s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0371s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0311s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439886' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0405s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0313s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0337s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.3433s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0382s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.1208s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0373s ]
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 140 行.
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 141 行.

[ 2016-08-29T11:05:30+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000102s ]
INFO: [ app_init ] --END-- [ RunTime:0.001805s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001122s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002397s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004169s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0433s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0362s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0372s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472439924' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0405s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0345s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0381s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0330s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0333s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2953) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.0393s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0336s ]
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 140 行.
NOTIC: [8] Undefined variable: j G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 141 行.
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: error2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 205 行.
NOTIC: [8] Undefined variable: money G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [2] array_values() expects parameter 1 to be array, null given G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [8] Undefined variable: feightmoney G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 217 行.
SQL: SHOW COLUMNS FROM `ab_shop_order` [ RunTime:0.0385s ]
SQL: INSERT INTO `ab_shop_order` (`user_id`,`order_no`,`payment`,`pay_status`,`payable_amount`,`adjust_taxes`,`taxes`,`is_invoice`,`order_amount`,`status`,`delete_status`,`create_time`,`update_time`,`rahmen_price`,`order_source`) VALUES ('90','20160829110529878','0','0','2153','0.08875','191.08','0','2344.08','1','0','2016-08-29 11:05:29','2016-08-29 11:05:29','0','3') [ RunTime:0.0329s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_express` [ RunTime:0.0329s ]
SQL: INSERT INTO `ab_shop_order_express` (`order_id`,`accept_name`,`phone`,`mobile`,`province`,`city`,`billing_id`,`address`,`addr`,`zip`,`address_id`,`goods_invoice`,`delete_status`,`create_time`) VALUES ('1520','Wuwjjj Zhi','','3123451234','219','New York','63','','555 Lexington Avenue','10022','63','0','0','2016-08-29 11:05:29') [ RunTime:0.0328s ]
SQL: INSERT INTO `ab_shop_order_goods` (`order_goods_no`,`order_id`,`goods_id`,`ups_service_code`,`rahmen_id`,`rahmen_price`,`frame_count`,`frame_in_count`,`inline_id`,`backSize`,`weight`,`width`,`length`,`height`,`box`,`bags`,`backColor`,`colorName`,`goods_price`,`is_postage`,`delete_status`,`create_time`,`isfree`) VALUES ('20160829110529878','1520','3597','','40','353','9','0','0','3','1','49.2','49.2','5.12','6','50','#fbfdfc','Winter White','1800','0','0','2016-08-29 11:05:29','1') [ RunTime:0.0402s ]
SQL: DELETE FROM `ab_shop_enshrine` WHERE `id` IN ('2953') AND `user` = 90 [ RunTime:0.0325s ]
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0327s ]
SQL: SHOW COLUMNS FROM `ab_shop_rahmen` [ RunTime:0.0486s ]
SQL: update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597) [ RunTime:0.0361s ]
SQL: update ab_shop_rahmen set inventory = inventory - 9 where inventory - 9 >= 0  and id in (40)  [ RunTime:0.0314s ]

[ 2016-08-29T11:44:35+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000067s ]
INFO: [ app_init ] --END-- [ RunTime:0.001650s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001292s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002442s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004491s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.0467s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.0323s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.0313s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472442272' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.0400s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0323s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0335s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0326s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0321s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2988) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.4093s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.0343s ]
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 176 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 182 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 188 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 194 行.
NOTIC: [8] Undefined variable: error2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 205 行.
NOTIC: [8] Undefined variable: money G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [2] array_values() expects parameter 1 to be array, null given G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 216 行.
NOTIC: [8] Undefined variable: feightmoney G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 217 行.
SQL: SHOW COLUMNS FROM `ab_shop_order` [ RunTime:0.0326s ]
SQL: INSERT INTO `ab_shop_order` (`user_id`,`order_no`,`payment`,`pay_status`,`payable_amount`,`adjust_taxes`,`taxes`,`is_invoice`,`order_amount`,`status`,`delete_status`,`create_time`,`update_time`,`rahmen_price`,`order_source`) VALUES ('90','20160829114435284','0','0','1800','0.08875','159.75','0','1959.75','1','0','2016-08-29 11:44:35','2016-08-29 11:44:35','0','3') [ RunTime:0.0314s ]
NOTIC: [2] Illegal string offset 'price' G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 266 行.
NOTIC: [8] Uninitialized string offset: 0 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 266 行.
NOTIC: [2] Illegal string offset 'frame_count' G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 267 行.
NOTIC: [8] Uninitialized string offset: 0 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 267 行.
NOTIC: [2] Illegal string offset 'frame_in_count' G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 268 行.
NOTIC: [8] Uninitialized string offset: 0 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 268 行.
NOTIC: [2] Illegal string offset 'inline_id' G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 269 行.
NOTIC: [8] Uninitialized string offset: 0 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 269 行.
SQL: SHOW COLUMNS FROM `ab_shop_order_express` [ RunTime:0.0335s ]
SQL: INSERT INTO `ab_shop_order_express` (`order_id`,`accept_name`,`phone`,`mobile`,`province`,`city`,`billing_id`,`address`,`addr`,`zip`,`address_id`,`goods_invoice`,`delete_status`,`create_time`) VALUES ('1521','Wuwjjj Zhi','','3123451234','219','New York','63','','555 Lexington Avenue','10022','63','0','0','2016-08-29 11:44:35') [ RunTime:0.0312s ]
SQL: INSERT INTO `ab_shop_order_goods` (`order_goods_no`,`order_id`,`goods_id`,`ups_service_code`,`rahmen_id`,`rahmen_price`,`frame_count`,`frame_in_count`,`inline_id`,`backSize`,`weight`,`width`,`length`,`height`,`box`,`bags`,`backColor`,`colorName`,`goods_price`,`is_postage`,`delete_status`,`create_time`,`isfree`) VALUES ('20160829114435284','1521','3597','03',NULL,'0','','','0',NULL,'1','55.1','55.1','5.12','7','Bag50',NULL,NULL,'1800','0','0','2016-08-29 11:44:35','1') [ RunTime:0.0313s ]
SQL: DELETE FROM `ab_shop_enshrine` WHERE `id` IN ('2988') AND `user` = 90 [ RunTime:0.0519s ]
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0363s ]
SQL: SHOW COLUMNS FROM `ab_shop_rahmen` [ RunTime:0.0326s ]
SQL: update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597) [ RunTime:0.0309s ]

[ 2016-08-29T12:26:49+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/order/createorder
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000060s ]
INFO: [ app_init ] --END-- [ RunTime:0.001109s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.004039s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002311s ]
INFO: [ app_begin ] --END-- [ RunTime:0.007120s ]
SQL: SHOW COLUMNS FROM `ab_base_user` [ RunTime:0.1558s ]
SQL: SHOW COLUMNS FROM `ab_base_session` [ RunTime:0.1412s ]
SQL: SELECT `id`,`token`,`lastactive` FROM `ab_base_session` WHERE (  email = '501368569@qq.com'   ) LIMIT 1   [ RunTime:0.1092s ]
SQL: UPDATE `ab_base_session` SET `lastactive`='1472444805' WHERE (  email = '501368569@qq.com' and token = 'da8cDrhAhCVZZeh1jfssF%2BmiptPx9Q6glRgUeZ8M2fEK6tmYMj8ptdqP277qvBVdxABEWAjGXaBm4idEQr936lqtEoahPLr5FtAc455eYes%2BNVpUjtWgbqhGQfQ'  ) [ RunTime:0.1100s ]
SQL: SELECT `id`,`is_able`,`username` FROM `ab_base_user` WHERE ( user_status in (1) and delete_status in (0) and email= "501368569@qq.com" and id = 90 ) LIMIT 1   [ RunTime:0.0913s ]
SQL: SHOW COLUMNS FROM `ab_shop_address` [ RunTime:0.0778s ]
SQL: SELECT ab_shop_address.id,ab_shop_address.ext,ab_shop_address.email,ab_shop_address.is_default,ab_shop_address.phone,ab_shop_address.postcode,ab_shop_address.addr,ab_shop_address.address,ab_shop_address.firstname,ab_shop_address.lastname,ab_shop_address.area,ab_shop_address.city,ab_shop_address.province,ab_shop_address.user_id,ab_shop_address.accept_name as addr_username,(select a.name from ab_base_area as a where a.id = ab_shop_address.province) as state_name,ab_shop_address.mobile,(select a.simple_code from ab_base_area as a where a.id = ab_shop_address.province) as state,CONCAT(addr,' ',`address`,' ',`city`,' ',(select a.name from ab_base_area as a where a.id = ab_shop_address.province) ) as real_address FROM `ab_shop_address` WHERE (  ab_shop_address.delete_status in (0) and ab_shop_address.adr_type in (0)  and  user_id = 90 and is_default in (1) ) LIMIT 1   [ RunTime:0.0347s ]
SQL: SHOW COLUMNS FROM `ab_shop_enshrine` [ RunTime:0.0391s ]
SQL: select
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.r_img_path,'.',1),'_s',SUBSTRING(r.r_img_path,LENGTH(SUBSTRING_INDEX(r.r_img_path,'.',1))+1,LENGTH(r.r_img_path)))) as rahmen_img_url,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_left_img,'.',1),'_s',SUBSTRING(r.top_left_img,LENGTH(SUBSTRING_INDEX(r.top_left_img,'.',1))+1,LENGTH(r.top_left_img)))) as top_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.top_right_img,'.',1),'_s',SUBSTRING(r.top_right_img,LENGTH(SUBSTRING_INDEX(r.top_right_img,'.',1))+1,LENGTH(r.top_right_img)))) as top_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_left_img,'.',1),'_s',SUBSTRING(r.bottom_left_img,LENGTH(SUBSTRING_INDEX(r.bottom_left_img,'.',1))+1,LENGTH(r.bottom_left_img)))) as bottom_left_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.bottom_right_img,'.',1),'_s',SUBSTRING(r.bottom_right_img,LENGTH(SUBSTRING_INDEX(r.bottom_right_img,'.',1))+1,LENGTH(r.bottom_right_img)))) as bottom_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_top_img,'.',1),'_s',SUBSTRING(r.border_top_img,LENGTH(SUBSTRING_INDEX(r.border_top_img,'.',1))+1,LENGTH(r.border_top_img)))) as border_top_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_bottom_img,'.',1),'_s',SUBSTRING(r.border_bottom_img,LENGTH(SUBSTRING_INDEX(r.border_bottom_img,'.',1))+1,LENGTH(r.border_bottom_img)))) as border_bottom_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_right_img,'.',1),'_s',SUBSTRING(r.border_right_img,LENGTH(SUBSTRING_INDEX(r.border_right_img,'.',1))+1,LENGTH(r.border_right_img)))) as border_right_img, CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(r.border_left_img,'.',1),'_s',SUBSTRING(r.border_left_img,LENGTH(SUBSTRING_INDEX(r.border_left_img,'.',1))+1,LENGTH(r.border_left_img)))) as border_left_img,
                    r.r_weight as rahmen_weight,
                    r.inventory as rahmen_inventory,
                    e.id,
                    r.name as rahmen_name,
                    (SELECT
                        fs.setting
                    FROM
                        ab_shop_free_shipping fs
                    WHERE
                        fs.delete_status in (0)
                        AND fs.startTime < now()
                        AND fs.endTime > now()
                        AND (fs.type in (0) OR (select id from ab_shop_free_shipping_goods b where b.freeId=fs.id and b.goodsId=e.goods )) ORDER BY fs.id ASC limit 1
                    ) as freeshipmoney,
                    r.r_size as rahmen_size,
                    r.r_width as rahmen_width,
                    e.goods, 
                    e.backColor,
                     e.colorName   ,
                    e.backSize,
                    e.frame as rahmen_id, 
                    e.frame_price as price,
                    e.frame_count,
                    e.frame_in_count,
                    e.inline_id,
                    g.title as name, 
                    g.id as goods_id,
                    g.inventory,
                    g.weight,
                    ag.type,
                    g.recommended,
                    CONCAT('ShopGoodsID_',  g.id) as jump_url,
                    g.sell_price,
                    g.longth as goods_longth,
                    g.width as goods_width,
                    CONCAT(round(g.longth),'×', round(g.width) ) as size,
                    a.name as authorname,
                    (select r.inventory from ab_shop_rahmen r where e.inline_id = r.id ) inline_inventory,
                    (select d.dictname from sys_diction d where d.id = g.medium) as medium
                from ab_shop_enshrine e 
                    left join ab_base_goods g on e.goods = g.id
                    left join ab_base_author_goods ag on g.id = ag.goods
                    left join ab_base_author a on ag.author = a.id
                    left join ab_shop_rahmen r on e.frame = r.id and r.delete_status in (0)
                where e.id in (2977) and  
                  user = 90 
                and g.is_online in (1) 
                and g.delete_status in (0)
                and ag.delete_status in (0)
                and a.name is not null
                and ag.type in (1)
                order  by e.create_time
                 [ RunTime:0.4040s ]
SQL: SHOW COLUMNS FROM `ab_shop_order_goods` [ RunTime:0.1184s ]
NOTIC: [8] Undefined variable: money1 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 177 行.
NOTIC: [8] Undefined variable: money2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 183 行.
NOTIC: [8] Undefined variable: money3 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 189 行.
NOTIC: [8] Undefined variable: money4 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 195 行.
NOTIC: [8] Undefined variable: error2 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 212 行.
NOTIC: [8] Undefined variable: money G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 223 行.
NOTIC: [2] array_values() expects parameter 1 to be array, null given G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 223 行.
SQL: SHOW COLUMNS FROM `ab_shop_order` [ RunTime:0.1042s ]
SQL: INSERT INTO `ab_shop_order` (`user_id`,`order_no`,`payment`,`pay_status`,`payable_amount`,`adjust_taxes`,`taxes`,`is_invoice`,`order_amount`,`status`,`delete_status`,`create_time`,`update_time`,`rahmen_price`,`order_source`) VALUES ('90','20160829122647968','0','0','1800','0.08875','159.75','0','1959.75','1','0','2016-08-29 12:26:47','2016-08-29 12:26:47','0','3') [ RunTime:0.0837s ]
NOTIC: [2] Illegal string offset 'price' G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 273 行.
NOTIC: [8] Uninitialized string offset: 0 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 273 行.
NOTIC: [2] Illegal string offset 'frame_count' G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 274 行.
NOTIC: [8] Uninitialized string offset: 0 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 274 行.
NOTIC: [2] Illegal string offset 'frame_in_count' G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 275 行.
NOTIC: [8] Uninitialized string offset: 0 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 275 行.
NOTIC: [2] Illegal string offset 'inline_id' G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 276 行.
NOTIC: [8] Uninitialized string offset: 0 G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\OrderController.class.php 第 276 行.
SQL: SHOW COLUMNS FROM `ab_shop_order_express` [ RunTime:0.0895s ]
SQL: INSERT INTO `ab_shop_order_express` (`order_id`,`accept_name`,`phone`,`mobile`,`province`,`city`,`billing_id`,`address`,`addr`,`zip`,`address_id`,`goods_invoice`,`delete_status`,`create_time`) VALUES ('1522','Wuwjjj Zhi','','3123451234','219','New York','63','','555 Lexington Avenue','10022','63','0','0','2016-08-29 12:26:47') [ RunTime:0.1458s ]
SQL: INSERT INTO `ab_shop_order_goods` (`order_goods_no`,`order_id`,`goods_id`,`ups_service_code`,`rahmen_id`,`rahmen_price`,`frame_count`,`frame_in_count`,`inline_id`,`backSize`,`weight`,`width`,`length`,`height`,`box`,`bags`,`backColor`,`colorName`,`goods_price`,`is_postage`,`delete_status`,`create_time`,`isfree`) VALUES ('20160829122647968','1522','3597','03',NULL,'0','','','0',NULL,'1','55.1','55.1','5.12','7','Bag50',NULL,NULL,'1800','0','0','2016-08-29 12:26:47','1') [ RunTime:0.1107s ]
SQL: DELETE FROM `ab_shop_enshrine` WHERE `id` IN ('2977') AND `user` = 90 [ RunTime:0.1057s ]
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.1727s ]
SQL: SHOW COLUMNS FROM `ab_shop_rahmen` [ RunTime:0.6084s ]
SQL: update ab_base_goods set inventory = 0 where inventory > 0 and  id in (3597) [ RunTime:0.1277s ]

[ 2016-08-29T15:20:23+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/shop/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000067s ]
INFO: [ app_init ] --END-- [ RunTime:0.034642s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.050011s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.067692s ]
INFO: [ app_begin ] --END-- [ RunTime:0.119070s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_featured` [ RunTime:0.0345s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_recommend` [ RunTime:0.0314s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT FROM_UNIXTIME( UNIX_TIMESTAMP(create_time),"%M %e,%Y") create_time,recommend_link link,recommend_title title,recommend_remark content,`author`,CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(recommend_pic,'.',1),'_s',SUBSTRING(recommend_pic,LENGTH(SUBSTRING_INDEX(recommend_pic,'.',1))+1,LENGTH(recommend_pic)))) as img_url FROM `ab_base_recommend` WHERE ( delete_status in (0) and featured_id in (60)  ) ORDER BY pxh asc  [ RunTime:0.0301s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_expert_recommend` [ RunTime:0.0307s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT 
                     CONCAT('ShopGoodsID_',g.id) as jump_url,
                    g.title as name,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT(round(g.longth),'×', round(g.width)) as size,
                    g.sell_price,
                    (select  a.name  from ab_base_author a where   ag.author = a.id and a.author_type in (1) ) authorname,
                    g.url,
                    g.id as goods_id
                FROM ab_base_expert_recommend er
                    LEFT JOIN ab_base_goods g ON g.id = er.goodsid and g.delete_status in (0) and g.is_online=1 and  g.inventory in (1) 
                    inner join ab_base_author_goods ag on g.id = ag.goods AND ag.type IN (1)
                    WHERE 
                     er.delete_status in (0) 
                    and er.moduletype in (1,3)
                    ORDER BY g.sort asc, er.create_time DESC
                    LIMIT 0,8 [ RunTime:0.0311s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                        CONCAT('ShopGoodsID_',t.id) as jump_url,
                        CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(t.cover_path,'.',1),'_s',SUBSTRING(t.cover_path,LENGTH(SUBSTRING_INDEX(t.cover_path,'.',1))+1,LENGTH(t.cover_path)))) as img_url,
                        CONCAT(round(t.longth),'×', round(t.width)) as size,
                        t.sell_price,
                        d.name as authorname,
                        t.url,
                        t.title as name
                    FROM
                        ab_base_goods t
                    LEFT JOIN ab_base_author_goods a ON t.id = a.goods
                    AND a.delete_status = 0
                    LEFT JOIN ab_base_author d ON a.author = d.id
                    AND d.delete_status = 0
                    LEFT JOIN php_expert_goods b ON t.id = b.goods
                    WHERE
                        t.is_online = 1
                    AND t.inventory <> 0
                    AND a.type = 1
                    AND a.author IS NOT NULL
                    AND t.delete_status = 0
                    AND b.`comment` IS NOT NULL
                    AND b.`comment` <> ''
                    AND b.id = (
                        SELECT
                            max(id)
                        FROM
                            php_expert_goods c
                        WHERE
                            c.goods = t.id
                        AND c.`comment` IS NOT NULL
                        AND c.`comment` <> ''
                    )
                    
                    ORDER BY
                        t.online_time DESC
                    LIMIT 8 [ RunTime:9.7483s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT ucase(m.dictname) as theme_name,
                                   m.id as theme,
                                   CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(m.pic_path,'.',1),'_s',SUBSTRING(m.pic_path,LENGTH(SUBSTRING_INDEX(m.pic_path,'.',1))+1,LENGTH(m.pic_path)))) as img_url
                                 FROM sys_diction m where 
                                m.delete_status = 0 
                                and m.typeid = 63 
                                limit 0,12
                         [ RunTime:0.0332s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_life_news` [ RunTime:0.0310s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0341s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT s.id,
                     CONCAT('LifeNewsID_', s.id) jump_url,
                     s.news_title title,
                     CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(s.cover_imgPath,'.',1),'_s',SUBSTRING(s.cover_imgPath,LENGTH(SUBSTRING_INDEX(s.cover_imgPath,'.',1))+1,LENGTH(s.cover_imgPath)))) as img_url
                     , FROM_UNIXTIME(UNIX_TIMESTAMP(s.create_time),"%M %e, %Y") as create_time,
                     s.news_sources,
                     s.news_type as type,
                     s.news_desc,
                     s.author,
                     s.column
                from ab_life_news s
                where ( 
                        s.news_examine in (1) or 
                        (
                        s.news_examine in (2) and 
                         DATE_FORMAT(now(),'%Y-%m-%d %H:%i:%s') 
                         >=
                         DATE_FORMAT(s.issuance_time,'%Y-%m-%d %H:%i:%s') 
                        ) 
                    ) and s.delete_status in (0)
                and s.column=27
                            and s.is_highlight in (1)
                order by s.pxh asc,s.create_time desc
                limit 0,6  [ RunTime:0.0304s ]
NOTIC: [8] Undefined index: HTTP_X_REAL_IP G:\wamp\www\artbean2\code\trunk\webService\Application\Common\Common\function.php 第 455 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `operation_click` [ RunTime:0.0312s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: select sd.id,IFNULL(sum(a.themeNum),0) as themeNum from (
        select sd.id,count(sd.id) as themeNum from operation_click oc 
                    left join ab_base_goods abg on oc.oper=abg.id left join sys_diction sd on sd.id=abg.theme 
                    where sd.id is not null and(  
                     oc.ip = '0.0.0.0'  or  oc.oper_user = 90 
                      )
                    group by sd.id
        union all
        select sd.id,count(sd.id) as themeNum from ab_user_favourit auf 
                left join ab_base_goods abg on auf.goods_id=abg.id left join sys_diction sd on sd.id=abg.theme 
                where sd.id is not null 
                 and auf.user_id = 90  
                group by sd.id 
        union all
        select sd.id,count(sd.id) as themeNum from ab_shop_order_goods asog 
            left join ab_shop_order aso on aso.id=asog.order_id 
            left join ab_base_goods abg on asog.goods_id=abg.id left join sys_diction sd on sd.id=abg.theme 
            where sd.id is not null 
             and aso.user_id = 90
            group by sd.id ) a right join sys_diction sd on a.id=sd.id group by a.id [ RunTime:0.0404s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '382' 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '382' 
        )))  
        ORDER BY t.id LIMIT 
       3 [ RunTime:0.0371s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '383'  and t.id not in (382,382,382 ) 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '383'  and t.id not in (382,382,382 ) 
        )))  
        ORDER BY t.id LIMIT 
       1 [ RunTime:0.0393s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '384'  and t.id not in (383 ) 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '384'  and t.id not in (383 ) 
        )))  
        ORDER BY t.id LIMIT 
       2 [ RunTime:0.0368s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '385'  and t.id not in (384,384 ) 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '385'  and t.id not in (384,384 ) 
        )))  
        ORDER BY t.id LIMIT 
       1 [ RunTime:0.0368s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
            
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
            
        )))  
        ORDER BY t.id LIMIT 
       1 [ RunTime:0.0446s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_help_category` [ RunTime:0.0305s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT `id`,CONCAT("HelpCateID_",id) as help_url,name  as help_name,`parent_id`,`url` FROM `ab_base_help_category` WHERE ( delete_status in (0) )  [ RunTime:0.0298s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
ERR: 1305:FUNCTION g.on_salein does not exist
 [ SQL语句 ] : SELECT 
                    g.id goods_id,
                    g.width,
                    CONCAT('ShopGoodsID_', g.id) AS jump_url,
                    g.longth,
                    CONCAT(
                        round(g.longth),
                        '×',
                        round(g.width)
                    ) AS size,
                    g.sell_price,
                    c.name authorname,
                    g.url,
                    g.title name
                FROM ab_base_goods g 
                    LEFT JOIN ab_base_author_goods a ON g.id = a.goods AND a.delete_status in (0) AND a.type in (1) 
                    LEFT JOIN ab_base_author c ON a.author = c.id AND c.delete_status in (0)
                WHERE g.is_online in (1) AND  g.inventory in (1) 
                    AND g.delete_status in (0) AND g.on_salein (1)
                ORDER BY g.sort ASC 
                LIMIT 0,4

[ 2016-08-29T15:20:52+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/shop/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000090s ]
INFO: [ app_init ] --END-- [ RunTime:0.001515s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001297s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002523s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004444s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_expert_recommend` [ RunTime:0.0302s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT 
                     CONCAT('ShopGoodsID_',g.id) as jump_url,
                    g.title as name,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT(round(g.longth),'×', round(g.width)) as size,
                    g.sell_price,
                    (select  a.name  from ab_base_author a where   ag.author = a.id and a.author_type in (1) ) authorname,
                    g.url,
                    g.id as goods_id
                FROM ab_base_expert_recommend er
                    LEFT JOIN ab_base_goods g ON g.id = er.goodsid and g.delete_status in (0) and g.is_online=1 and  g.inventory in (1) 
                    inner join ab_base_author_goods ag on g.id = ag.goods AND ag.type IN (1)
                    WHERE 
                     er.delete_status in (0) 
                    and er.moduletype in (1,3)
                    ORDER BY g.sort asc, er.create_time DESC
                    LIMIT 0,8 [ RunTime:0.0308s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                        CONCAT('ShopGoodsID_',t.id) as jump_url,
                        CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(t.cover_path,'.',1),'_s',SUBSTRING(t.cover_path,LENGTH(SUBSTRING_INDEX(t.cover_path,'.',1))+1,LENGTH(t.cover_path)))) as img_url,
                        CONCAT(round(t.longth),'×', round(t.width)) as size,
                        t.sell_price,
                        d.name as authorname,
                        t.url,
                        t.title as name
                    FROM
                        ab_base_goods t
                    LEFT JOIN ab_base_author_goods a ON t.id = a.goods
                    AND a.delete_status = 0
                    LEFT JOIN ab_base_author d ON a.author = d.id
                    AND d.delete_status = 0
                    LEFT JOIN php_expert_goods b ON t.id = b.goods
                    WHERE
                        t.is_online = 1
                    AND t.inventory <> 0
                    AND a.type = 1
                    AND a.author IS NOT NULL
                    AND t.delete_status = 0
                    AND b.`comment` IS NOT NULL
                    AND b.`comment` <> ''
                    AND b.id = (
                        SELECT
                            max(id)
                        FROM
                            php_expert_goods c
                        WHERE
                            c.goods = t.id
                        AND c.`comment` IS NOT NULL
                        AND c.`comment` <> ''
                    )
                    
                    ORDER BY
                        t.online_time DESC
                    LIMIT 8 [ RunTime:9.3776s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT ucase(m.dictname) as theme_name,
                                   m.id as theme,
                                   CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(m.pic_path,'.',1),'_s',SUBSTRING(m.pic_path,LENGTH(SUBSTRING_INDEX(m.pic_path,'.',1))+1,LENGTH(m.pic_path)))) as img_url
                                 FROM sys_diction m where 
                                m.delete_status = 0 
                                and m.typeid = 63 
                                limit 0,12
                         [ RunTime:0.0301s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_life_news` [ RunTime:0.0309s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0303s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT s.id,
                     CONCAT('LifeNewsID_', s.id) jump_url,
                     s.news_title title,
                     CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(s.cover_imgPath,'.',1),'_s',SUBSTRING(s.cover_imgPath,LENGTH(SUBSTRING_INDEX(s.cover_imgPath,'.',1))+1,LENGTH(s.cover_imgPath)))) as img_url
                     , FROM_UNIXTIME(UNIX_TIMESTAMP(s.create_time),"%M %e, %Y") as create_time,
                     s.news_sources,
                     s.news_type as type,
                     s.news_desc,
                     s.author,
                     s.column
                from ab_life_news s
                where ( 
                        s.news_examine in (1) or 
                        (
                        s.news_examine in (2) and 
                         DATE_FORMAT(now(),'%Y-%m-%d %H:%i:%s') 
                         >=
                         DATE_FORMAT(s.issuance_time,'%Y-%m-%d %H:%i:%s') 
                        ) 
                    ) and s.delete_status in (0)
                and s.column=27
                            and s.is_highlight in (1)
                order by s.pxh asc,s.create_time desc
                limit 0,6  [ RunTime:0.0313s ]
NOTIC: [8] Undefined index: HTTP_X_REAL_IP G:\wamp\www\artbean2\code\trunk\webService\Application\Common\Common\function.php 第 455 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `operation_click` [ RunTime:0.0301s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: select sd.id,IFNULL(sum(a.themeNum),0) as themeNum from (
        select sd.id,count(sd.id) as themeNum from operation_click oc 
                    left join ab_base_goods abg on oc.oper=abg.id left join sys_diction sd on sd.id=abg.theme 
                    where sd.id is not null and(  
                     oc.ip = '0.0.0.0'  or  oc.oper_user = 90 
                      )
                    group by sd.id
        union all
        select sd.id,count(sd.id) as themeNum from ab_user_favourit auf 
                left join ab_base_goods abg on auf.goods_id=abg.id left join sys_diction sd on sd.id=abg.theme 
                where sd.id is not null 
                 and auf.user_id = 90  
                group by sd.id 
        union all
        select sd.id,count(sd.id) as themeNum from ab_shop_order_goods asog 
            left join ab_shop_order aso on aso.id=asog.order_id 
            left join ab_base_goods abg on asog.goods_id=abg.id left join sys_diction sd on sd.id=abg.theme 
            where sd.id is not null 
             and aso.user_id = 90
            group by sd.id ) a right join sys_diction sd on a.id=sd.id group by a.id [ RunTime:0.0348s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '382' 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '382' 
        )))  
        ORDER BY t.id LIMIT 
       3 [ RunTime:0.0368s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '383'  and t.id not in (382,382,382 ) 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '383'  and t.id not in (382,382,382 ) 
        )))  
        ORDER BY t.id LIMIT 
       1 [ RunTime:0.0343s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '384'  and t.id not in (383 ) 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '384'  and t.id not in (383 ) 
        )))  
        ORDER BY t.id LIMIT 
       2 [ RunTime:0.0395s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '385'  and t.id not in (384,384 ) 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '385'  and t.id not in (384,384 ) 
        )))  
        ORDER BY t.id LIMIT 
       1 [ RunTime:0.0338s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
            
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
            
        )))  
        ORDER BY t.id LIMIT 
       1 [ RunTime:0.0452s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
ERR: 1305:FUNCTION g.on_salein does not exist
 [ SQL语句 ] : SELECT 
                    g.id goods_id,
                    g.width,
                    CONCAT('ShopGoodsID_', g.id) AS jump_url,
                    g.longth,
                    CONCAT(
                        round(g.longth),
                        '×',
                        round(g.width)
                    ) AS size,
                    g.sell_price,
                    c.name authorname,
                    g.url,
                    g.title name
                FROM ab_base_goods g 
                    LEFT JOIN ab_base_author_goods a ON g.id = a.goods AND a.delete_status in (0) AND a.type in (1) 
                    LEFT JOIN ab_base_author c ON a.author = c.id AND c.delete_status in (0)
                WHERE g.is_online in (1) AND  g.inventory in (1) 
                    AND g.delete_status in (0) AND g.on_salein (1)
                ORDER BY g.sort ASC 
                LIMIT 0,4
ERR: 1305:FUNCTION g.on_salein does not exist
 [ SQL语句 ] : SELECT 
                    g.id goods_id,
                    g.width,
                    CONCAT('ShopGoodsID_', g.id) AS jump_url,
                    g.longth,
                    CONCAT(
                        round(g.longth),
                        '×',
                        round(g.width)
                    ) AS size,
                    g.sell_price,
                    c.name authorname,
                    g.url,
                    g.title name
                FROM ab_base_goods g 
                    LEFT JOIN ab_base_author_goods a ON g.id = a.goods AND a.delete_status in (0) AND a.type in (1) 
                    LEFT JOIN ab_base_author c ON a.author = c.id AND c.delete_status in (0)
                WHERE g.is_online in (1) AND  g.inventory in (1) 
                    AND g.delete_status in (0) AND g.on_salein (1)
                ORDER BY g.sort ASC 
                LIMIT 0,4

[ 2016-08-29T15:21:32+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/shop/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000087s ]
INFO: [ app_init ] --END-- [ RunTime:0.000986s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001102s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002379s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004051s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_expert_recommend` [ RunTime:0.0348s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT 
                     CONCAT('ShopGoodsID_',g.id) as jump_url,
                    g.title as name,
                    CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(g.cover_path,'.',1),'_s',SUBSTRING(g.cover_path,LENGTH(SUBSTRING_INDEX(g.cover_path,'.',1))+1,LENGTH(g.cover_path)))) as img_url,
                    CONCAT(round(g.longth),'×', round(g.width)) as size,
                    g.sell_price,
                    (select  a.name  from ab_base_author a where   ag.author = a.id and a.author_type in (1) ) authorname,
                    g.url,
                    g.id as goods_id
                FROM ab_base_expert_recommend er
                    LEFT JOIN ab_base_goods g ON g.id = er.goodsid and g.delete_status in (0) and g.is_online=1 and  g.inventory in (1) 
                    inner join ab_base_author_goods ag on g.id = ag.goods AND ag.type IN (1)
                    WHERE 
                     er.delete_status in (0) 
                    and er.moduletype in (1,3)
                    ORDER BY g.sort asc, er.create_time DESC
                    LIMIT 0,8 [ RunTime:0.0352s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT
                        CONCAT('ShopGoodsID_',t.id) as jump_url,
                        CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(t.cover_path,'.',1),'_s',SUBSTRING(t.cover_path,LENGTH(SUBSTRING_INDEX(t.cover_path,'.',1))+1,LENGTH(t.cover_path)))) as img_url,
                        CONCAT(round(t.longth),'×', round(t.width)) as size,
                        t.sell_price,
                        d.name as authorname,
                        t.url,
                        t.title as name
                    FROM
                        ab_base_goods t
                    LEFT JOIN ab_base_author_goods a ON t.id = a.goods
                    AND a.delete_status = 0
                    LEFT JOIN ab_base_author d ON a.author = d.id
                    AND d.delete_status = 0
                    LEFT JOIN php_expert_goods b ON t.id = b.goods
                    WHERE
                        t.is_online = 1
                    AND t.inventory <> 0
                    AND a.type = 1
                    AND a.author IS NOT NULL
                    AND t.delete_status = 0
                    AND b.`comment` IS NOT NULL
                    AND b.`comment` <> ''
                    AND b.id = (
                        SELECT
                            max(id)
                        FROM
                            php_expert_goods c
                        WHERE
                            c.goods = t.id
                        AND c.`comment` IS NOT NULL
                        AND c.`comment` <> ''
                    )
                    
                    ORDER BY
                        t.online_time DESC
                    LIMIT 8 [ RunTime:9.4632s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT ucase(m.dictname) as theme_name,
                                   m.id as theme,
                                   CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(m.pic_path,'.',1),'_s',SUBSTRING(m.pic_path,LENGTH(SUBSTRING_INDEX(m.pic_path,'.',1))+1,LENGTH(m.pic_path)))) as img_url
                                 FROM sys_diction m where 
                                m.delete_status = 0 
                                and m.typeid = 63 
                                limit 0,12
                         [ RunTime:0.0330s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_life_news` [ RunTime:0.0335s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `ab_base_goods` [ RunTime:0.0360s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT s.id,
                     CONCAT('LifeNewsID_', s.id) jump_url,
                     s.news_title title,
                     CONCAT('http://50.97.37.171',CONCAT(SUBSTRING_INDEX(s.cover_imgPath,'.',1),'_s',SUBSTRING(s.cover_imgPath,LENGTH(SUBSTRING_INDEX(s.cover_imgPath,'.',1))+1,LENGTH(s.cover_imgPath)))) as img_url
                     , FROM_UNIXTIME(UNIX_TIMESTAMP(s.create_time),"%M %e, %Y") as create_time,
                     s.news_sources,
                     s.news_type as type,
                     s.news_desc,
                     s.author,
                     s.column
                from ab_life_news s
                where ( 
                        s.news_examine in (1) or 
                        (
                        s.news_examine in (2) and 
                         DATE_FORMAT(now(),'%Y-%m-%d %H:%i:%s') 
                         >=
                         DATE_FORMAT(s.issuance_time,'%Y-%m-%d %H:%i:%s') 
                        ) 
                    ) and s.delete_status in (0)
                and s.column=27
                            and s.is_highlight in (1)
                order by s.pxh asc,s.create_time desc
                limit 0,6  [ RunTime:0.0337s ]
NOTIC: [8] Undefined index: HTTP_X_REAL_IP G:\wamp\www\artbean2\code\trunk\webService\Application\Common\Common\function.php 第 455 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SHOW COLUMNS FROM `operation_click` [ RunTime:0.0335s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: select sd.id,IFNULL(sum(a.themeNum),0) as themeNum from (
        select sd.id,count(sd.id) as themeNum from operation_click oc 
                    left join ab_base_goods abg on oc.oper=abg.id left join sys_diction sd on sd.id=abg.theme 
                    where sd.id is not null and(  
                     oc.ip = '0.0.0.0'  or  oc.oper_user = 90 
                      )
                    group by sd.id
        union all
        select sd.id,count(sd.id) as themeNum from ab_user_favourit auf 
                left join ab_base_goods abg on auf.goods_id=abg.id left join sys_diction sd on sd.id=abg.theme 
                where sd.id is not null 
                 and auf.user_id = 90  
                group by sd.id 
        union all
        select sd.id,count(sd.id) as themeNum from ab_shop_order_goods asog 
            left join ab_shop_order aso on aso.id=asog.order_id 
            left join ab_base_goods abg on asog.goods_id=abg.id left join sys_diction sd on sd.id=abg.theme 
            where sd.id is not null 
             and aso.user_id = 90
            group by sd.id ) a right join sys_diction sd on a.id=sd.id group by a.id [ RunTime:0.0402s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '382' 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '382' 
        )))  
        ORDER BY t.id LIMIT 
       3 [ RunTime:0.0396s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '383'  and t.id not in (382,382,382 ) 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '383'  and t.id not in (382,382,382 ) 
        )))  
        ORDER BY t.id LIMIT 
       1 [ RunTime:0.0377s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '384'  and t.id not in (383 ) 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '384'  and t.id not in (383 ) 
        )))  
        ORDER BY t.id LIMIT 
       2 [ RunTime:0.0405s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
             and t.theme = '385'  and t.id not in (384,384 ) 
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
             and t.theme = '385'  and t.id not in (384,384 ) 
        )))  
        ORDER BY t.id LIMIT 
       1 [ RunTime:0.0367s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL:  SELECT t.id,
            concat('ShopGoodsID_',t.id) jump_url,
            concat(round(t.longth), '×', round(t.width)) size,
            t.sell_price,
            d.name authorname,
            t.recommended,
            t.title name
            FROM ab_base_goods t left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0)
        LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0)
        where t.is_online in (1) and   t.inventory in (1) and a.type in (1) and a.author is not null and t.delete_status  in (0)
            
        and t.id >= (SELECT floor(RAND() * (SELECT MAX(t.id) FROM ab_base_goods t 
        left join ab_base_author_goods a on t.id=a.goods and a.delete_status in (0) 
                LEFT JOIN ab_base_author d ON a.author = d.id AND d.delete_status in (0) 
                where t.is_online in (1) and  t.inventory in (1) and a.type in (1)  and a.author is not null and t.delete_status in (0)
            
        )))  
        ORDER BY t.id LIMIT 
       1 [ RunTime:0.0485s ]
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 153 行.
NOTIC: [8] Undefined index: HTTP_TYPE G:\wamp\www\artbean2\code\trunk\webService\ThinkPHP\Library\Think\Db\Driver.class.php 第 155 行.
SQL: SELECT 
                    g.id goods_id,
                    g.width,
                    CONCAT('ShopGoodsID_', g.id) AS jump_url,
                    g.longth,
                    CONCAT(
                        round(g.longth),
                        '×',
                        round(g.width)
                    ) AS size,
                    g.sell_price,
                    c.name authorname,
                    g.url,
                    g.title name
                FROM ab_base_goods g 
                    LEFT JOIN ab_base_author_goods a ON g.id = a.goods AND a.delete_status in (0) AND a.type in (1) 
                    LEFT JOIN ab_base_author c ON a.author = c.id AND c.delete_status in (0)
                WHERE g.is_online in (1) AND  g.inventory in (1) 
                    AND g.delete_status in (0) AND g.on_sale in (1)
                ORDER BY g.sort ASC 
                LIMIT 0,4 [ RunTime:0.0352s ]

[ 2016-08-29T15:38:46+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/conlist/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000065s ]
INFO: [ app_init ] --END-- [ RunTime:0.001192s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001918s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.002314s ]
INFO: [ app_begin ] --END-- [ RunTime:0.005023s ]
NOTIC: [8] Undefined variable: customer_functions G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ConlistController.class.php 第 60 行.
NOTIC: [2] Invalid argument supplied for foreach() G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ConlistController.class.php 第 19 行.
NOTIC: [8] Undefined variable: customer_functions G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ConlistController.class.php 第 60 行.
NOTIC: [2] Invalid argument supplied for foreach() G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ConlistController.class.php 第 19 行.

[ 2016-08-29T17:15:24+08:00 ] ::1 /artbean2/code/trunk/webservice/index.php/home/conlist/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000062s ]
INFO: [ app_init ] --END-- [ RunTime:0.035835s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.027638s ]
INFO: Run Behavior\CheckLangBehavior [ RunTime:0.054597s ]
INFO: [ app_begin ] --END-- [ RunTime:0.082738s ]
NOTIC: [8] Undefined variable: customer_functions G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ConlistController.class.php 第 60 行.
NOTIC: [2] Invalid argument supplied for foreach() G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ConlistController.class.php 第 19 行.
NOTIC: [8] Undefined variable: customer_functions G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ConlistController.class.php 第 60 行.
NOTIC: [2] Invalid argument supplied for foreach() G:\wamp\www\artbean2\code\trunk\webService\Application\Home\Controller\ConlistController.class.php 第 19 行.

